header.dashboard__header
    h1.dashboard__caption Регистрация аварии

.dashboard__section.scroll(ng-controller='AccidentCreateCtrl as createCtrl')
    form.form.gutter_bottom_half(
        name='creationForm'
        novalidate
        ng-submit='createCtrl.submitted = true; creationForm.$valid && createCtrl.addAccident()'
    )
        .gutter_bottom_half
            leaflet(
                id='createAccidentMap'
                ng-if='listCtrl.map'
                center='listCtrl.map.center'
                markers='listCtrl.map.markers'
                width='100%'
                height='280px'
            )
        input(ng-hide='true' ng-model='createCtrl.newAccident.latitude' name='latitude' required)
        ng-messages(for='creationForm.latitude.$error' ng-if='createCtrl.interacted(creationForm.latitude)')
            p.form__errorMsg(ng-message='required') Пометьте место аварии на карте

        .accidentForm
            h3.form__caption.text_center Контакты

            input.form__input(
                placeholder='Адрес'
                ng-model='createCtrl.newAccident.address'
                name='address'
                required
            )
            ng-messages(for='creationForm.address.$error' ng-if='createCtrl.interacted(creationForm.address)')
                p.form__errorMsg(ng-message='required') Укажите адрес аварии

            input.form__input(
                placeholder='Телефон'
                ng-model='createCtrl.newAccident.phone'
                name='phone'
            )
            input.form__input(
                placeholder='Марка машины'
                ng-model='createCtrl.newAccident.car_brand'
                name='car_brand'
            )
            input.form__input(
                placeholder='Имя'
                ng-model='createCtrl.newAccident.client_name'
                name='name'
            )

            date-picker(selected='createCtrl.newAccident.date')

            input.form__input(
                placeholder='Время'
                ng-model='createCtrl.newAccident.time'
                name='time'
            )
            input.form__input(
                placeholder='ID комиссара'
                ng-model='createCtrl.newAccident.commissar_id'
                name='commissar'
            )

            .text_center
                button.button.button_lg ОТПРАВИТЬ
